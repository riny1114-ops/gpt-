"""
투자 대가들의 철학과 원칙을 저장하는 데이터베이스
신규 사용자(이거울)의 온보딩에 사용됩니다.
"""

def get_investment_principles():
    """투자 대가들의 원칙 데이터 반환"""
    
    principles = {
        "워런 버핏": {
            "icon": "🎯",
            "description": "가치 투자의 아버지. 장기적 관점에서 우량 기업에 투자하며, 이해할 수 있는 사업에만 투자합니다.",
            "philosophy": "시장은 단기적으로 투표기계이지만, 장기적으로는 저울이다.",
            "core_principles": [
                "이해할 수 있는 사업에만 투자하라",
                "장기적 관점을 가져라",
                "좋은 기업을 합리적 가격에 사라",
                "시장의 변동성을 친구로 만들어라"
            ],
            "rules": [
                "투자 전 해당 기업의 사업모델을 완전히 이해하기",
                "최소 5년 이상의 장기 보유 관점으로 투자하기",
                "경영진의 정직성과 능력을 평가하기",
                "내재가치 대비 할인된 가격에서만 매수하기",
                "시장의 단기 변동에 감정적으로 반응하지 않기"
            ],
            "warning_signs": [
                "사업을 이해하지 못하면서 투자하는 것",
                "단기 수익을 목적으로 거래하는 것",
                "시장 소음에 휩쓸리는 것",
                "빚을 내서 투자하는 것"
            ],
            "famous_quotes": [
                "Rule No. 1: 돈을 잃지 마라. Rule No. 2: 첫 번째 룰을 잊지 마라.",
                "가격은 당신이 지불하는 것이고, 가치는 당신이 얻는 것이다.",
                "누군가가 그늘에 앉을 수 있는 이유는 오래전에 나무를 심었기 때문이다."
            ]
        },
        
        "피터 린치": {
            "icon": "🔍", 
            "description": "성장주 투자의 대가. 일상생활에서 투자 아이디어를 찾고, 철저한 리서치를 통해 성장 기업을 발굴합니다.",
            "philosophy": "투자할 만한 것은 가까운 곳에 있다. 당신이 이미 알고 있는 회사에 투자하라.",
            "core_principles": [
                "자신이 잘 아는 분야에 투자하라",
                "성장하는 기업을 찾아라", 
                "PEG 비율을 활용하라",
                "스토리가 명확한 기업에 투자하라"
            ],
            "rules": [
                "일상에서 사용하는 제품이나 서비스의 회사 주식 고려하기",
                "매 분기 실적과 성장률을 꾸준히 모니터링하기",
                "PEG 비율 1.0 이하의 기업 우선 검토하기",
                "회사의 성장 스토리를 한 문장으로 설명할 수 있어야 함",
                "경쟁사 대비 경쟁우위 요소 파악하기"
            ],
            "warning_signs": [
                "핫한 테마주에 무작정 투자하는 것",
                "기업의 성장 동력을 모르면서 투자하는 것", 
                "높은 PER만 보고 판단하는 것",
                "너무 많은 종목에 분산 투자하는 것"
            ],
            "famous_quotes": [
                "아마추어가 프로를 이길 수 있는 몇 안 되는 분야가 바로 투자다.",
                "당신은 이미 알고 있다. 주식에 대해 알아야 할 것은 이미 알고 있다.",
                "월가에서 전하는 소식을 들었을 때는 이미 늦었다."
            ]
        },
        
        "벤저민 그레이엄": {
            "icon": "⚖️",
            "description": "가치 투자의 아버지. 안전 마진의 개념을 창시했으며, 감정보다는 숫자와 데이터에 기반한 투자를 강조합니다.",
            "philosophy": "투자란 철저한 분석을 통해 원금의 안전성과 적절한 수익률을 보장하는 것이다.",
            "core_principles": [
                "안전 마진을 확보하라",
                "내재가치를 정확히 계산하라",
                "감정이 아닌 숫자로 판단하라",
                "시장의 미스터 마켓을 이용하라"
            ],
            "rules": [
                "내재가치 대비 최소 30% 이상 할인된 가격에서 매수하기",
                "재무제표를 철저히 분석하여 기업의 진짜 가치 파악하기",
                "부채비율, ROE, 배당수익률 등 정량적 지표 검토하기",
                "시장 가격과 내재가치의 괴리를 기회로 활용하기",
                "분산투자를 통한 위험 관리하기"
            ],
            "warning_signs": [
                "정확한 가치 계산 없이 투자하는 것",
                "안전 마진 없이 매수하는 것",
                "감정적으로 매매 타이밍을 결정하는 것",
                "재무 건전성이 좋지 않은 기업에 투자하는 것"
            ],
            "famous_quotes": [
                "현명한 투자자는 시장이 제공하는 것을 받아들이지, 특정한 것을 요구하지 않는다.",
                "투자의 비밀은 당신의 능력 범위 안에서 좋은 사업을 합리적인 가격에 사는 것이다.",
                "시장은 단기적으로 투표기계이지만, 장기적으로는 저울이다."
            ]
        }
    }
    
    return principles

def get_principle_details(principle_name):
    """특정 투자 원칙의 상세 정보 반환"""
    principles = get_investment_principles()
    return principles.get(principle_name, None)

def get_daily_principle_tip(principle_name):
    """선택한 원칙에 따른 일일 투자 팁 반환"""
    tips = {
        "워런 버핏": [
            "오늘은 보유 중인 기업들의 최신 뉴스를 확인해보세요.",
            "장기적 관점에서 현재 주가가 적정한지 다시 한번 점검해보세요.",
            "기업의 경쟁우위(해자)가 여전히 유효한지 생각해보세요.",
            "시장의 단기 변동에 흔들리지 말고 원래 투자 thesis를 점검하세요.",
            "새로운 투자 기회보다는 기존 보유 종목의 질을 높이는 데 집중하세요."
        ],
        "피터 린치": [
            "일상생활에서 사용하는 새로운 제품이나 서비스가 있는지 살펴보세요.",
            "관심 있는 기업의 이번 분기 실적 발표 일정을 확인해보세요.",
            "보유 종목들의 성장 스토리가 여전히 유효한지 검토해보세요.",
            "PEG 비율을 다시 계산하여 현재 밸류에이션을 점검해보세요.",
            "경쟁사들의 동향을 파악하여 상대적 우위를 확인해보세요."
        ],
        "벤저민 그레이엄": [
            "관심 종목들의 최신 재무제표를 분석해보세요.",
            "현재 시장 가격이 계산한 내재가치와 얼마나 차이가 나는지 확인하세요.",
            "안전 마진이 충분한 투자 기회가 있는지 스크리닝해보세요.",
            "감정적 판단을 배제하고 오직 숫자와 데이터로만 투자를 검토하세요.",
            "포트폴리오의 분산 정도와 위험 수준을 재점검해보세요."
        ]
    }
    
    import random
    principle_tips = tips.get(principle_name, ["오늘도 신중한 투자 하세요."])
    return random.choice(principle_tips)

def compare_principles():
    """투자 원칙들 간의 비교 정보 반환"""
    comparison = {
        "투자 스타일": {
            "워런 버핏": "가치 투자 + 장기 보유",
            "피터 린치": "성장주 투자 + 적극적 관리", 
            "벤저민 그레이엄": "가치 투자 + 안전 마진"
        },
        "투자 기간": {
            "워런 버핏": "10년 이상 초장기",
            "피터 린치": "2-5년 중장기",
            "벤저민 그레이엄": "1-3년 중단기"
        },
        "핵심 지표": {
            "워런 버핏": "ROE, 부채비율, 경제적 해자",
            "피터 린치": "PEG, 매출성장률, 시장점유율",
            "벤저민 그레이엄": "PBR, PER, 유동비율"
        },
        "위험 관리": {
            "워런 버핏": "질 좋은 기업 + 장기 보유",
            "피터 린치": "철저한 리서치 + 적시 매도",
            "벤저민 그레이엄": "분산 투자 + 안전 마진"
        }
    }
    
    return comparison

def get_beginner_guide(principle_name):
    """초보자를 위한 원칙별 시작 가이드"""
    guides = {
        "워런 버핏": {
            "1단계": "자신이 이해할 수 있는 업종과 기업 파악하기",
            "2단계": "해당 기업들의 재무제표와 사업보고서 읽기",
            "3단계": "기업의 경쟁우위와 해자 분석하기",
            "4단계": "내재가치 계산 방법 익히기",
            "5단계": "할인된 가격에서 매수 후 장기 보유하기"
        },
        "피터 린치": {
            "1단계": "일상생활에서 사용하는 제품/서비스의 회사 리스트업",
            "2단계": "해당 기업들의 성장률과 실적 추이 분석하기",
            "3단계": "PEG 비율 계산법 익히고 활용하기",
            "4단계": "분기별 실적 모니터링 시스템 구축하기",
            "5단계": "성장 스토리 변화에 따른 매매 타이밍 결정하기"
        },
        "벤저민 그레이엄": {
            "1단계": "재무제표 읽기와 주요 비율 계산법 익히기",
            "2단계": "내재가치 계산 모델 학습하기",
            "3단계": "안전 마진 개념 이해하고 적용하기", 
            "4단계": "스크리닝을 통한 저평가 종목 발굴하기",
            "5단계": "분산투자를 통한 리스크 관리하기"
        }
    }
    
    return guides.get(principle_name, {})

def get_principle_books(principle_name):
    """원칙별 추천 도서"""
    books = {
        "워런 버핏": [
            "현명한 투자자 (벤저민 그레이엄)",
            "워런 버핏의 편지 (워런 버핏)",
            "스노볼 (앨리스 슈뢰더)",
            "버핏의 투자 원칙 (제러미 밀러)"
        ],
        "피터 린치": [
            "월가의 영웅 (피터 린치)",
            "전설로 떠나는 월가의 영웅 (피터 린치)",
            "피터 린치의 투자 이야기 (피터 린치)",
            "성장주 투자 가이드북 (필립 피셔)"
        ],
        "벤저민 그레이엄": [
            "현명한 투자자 (벤저민 그레이엄)",
            "증권분석 (벤저민 그레이엄)",
            "가치투자의 아버지 (벤저민 그레이엄)", 
            "가치 투자 전략 (자넷 로우)"
        ]
    }
    
    return books.get(principle_name, [])

def validate_principle_choice(principle_name):
    """선택한 원칙이 유효한지 검증"""
    valid_principles = list(get_investment_principles().keys())
    return principle_name in valid_principles